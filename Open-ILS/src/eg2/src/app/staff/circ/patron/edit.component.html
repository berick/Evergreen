
<span class="font-weight-bold" i18n>Show:</span>
<a class="ml-2" href="javascript:;'" (click)="showFields='required'" i18n>Required Fields</a>
<a class="ml-2" href="javascript:;'" (click)="showFields='suggested'" i18n>Suggested Fields</a>
<a class="ml-2" href="javascript:;'" (click)="showFields='all'" i18n>All Fields</a>


<ng-template #fieldLabel
  let-cls="cls" let-field="field" let-override="override">
  <div class="col-lg-3 field-label">
    <label for="{{cls}}-{{field}}-input">
      {{getFieldLabel(cls, field, override)}}
    </label>
    <!-- TODO doc links -->
  </div>
</ng-template>

<ng-template #fieldInput let-cls="cls" let-field="field" 
  let-type="type" let-disabled="disabled" let-path="path">
  <div class="col-lg-3">
    <input 
      type="{{type || 'text'}}"
      class="form-control" 
      name="{{cls}}-{{field}}-input"
      id="{{cls}}-{{field}}-input"
      [ngModel]="objectFromPath(path)[field]()"
      (ngModelChange)="fieldValueChange(path, field, $event)"
      (change)="fieldMaybeModified(path, field)"
      [required]="fieldRequired(cls, field)"
      [pattern]="fieldPattern(cls, field)"
      [disabled]="disabled"
    />
  </div>
</ng-template>


<div class="mt-3 striped-rows-even patron-edit-container" *ngIf="patron">
  <div class="row pt-1 pb-1 mt-2">
    <ng-container 
      *ngTemplateOutlet="fieldLabel; context: {cls: 'ac', field: 'barcode'}">
    </ng-container>
    <ng-container 
      *ngTemplateOutlet="fieldInput; context: 
        {cls: 'ac', field: 'barcode', disabled: !patron.isnew(), path: 'card'}">
    </ng-container>
  </div>
  <div class="row pt-1 pb-1 mt-2">
    <ng-container 
      *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'usrname'}">
    </ng-container>
    <ng-container 
      *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'usrname'}">
    </ng-container>
  </div>
  <div class="row pt-1 pb-1 mt-2">
    <ng-container 
      *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'passwd'}">
    </ng-container>
    <ng-container 
      *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'passwd'}">
    </ng-container>
    <div class="col-lg-3">
      <button class="btn btn-outline-dark" (click)="generatePassword()" i18n>
        Generate Password
      </button>
    </div>
  </div>
  <ul ngbNav #nameNav="ngbNav" class="nav-tabs" [activeId]="nameTab">
    <li ngbNavItem="primary">
      <a ngbNavLink i18n>Primary Name</a>
      <ng-template ngbNavContent>
        <div class="row pt-1 pb-1 mt-2">
          <ng-container 
            *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'prefix'}">
          </ng-container>
          <ng-container 
            *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'prefix'}">
          </ng-container>
        </div>
        <div class="row pt-1 pb-1 mt-2">
          <ng-container 
            *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'first_given_name'}">
          </ng-container>
          <ng-container 
            *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'first_given_name'}">
          </ng-container>
        </div>
        <div class="row pt-1 pb-1 mt-2">
          <ng-container 
            *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'second_given_name'}">
          </ng-container>
          <ng-container 
            *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'second_given_name'}">
          </ng-container>
        </div>
        <div class="row pt-1 pb-1 mt-2">
          <ng-container 
            *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'family_name'}">
          </ng-container>
          <ng-container 
            *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'family_name'}">
          </ng-container>
        </div>
        <div class="row pt-1 pb-1 mt-2">
          <ng-container 
            *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'suffix'}">
          </ng-container>
          <ng-container 
            *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'suffix'}">
          </ng-container>
        </div>
      </ng-template>
    </li>
    <li ngbNavItem="preferred">
      <a ngbNavLink i18n>Preferred Name</a>
      <ng-template ngbNavContent>
        <div class="row pt-1 pb-1 mt-2">
          <ng-container 
            *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'pref_prefix'}">
          </ng-container>
          <ng-container 
            *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'pref_prefix'}">
          </ng-container>
        </div>
        <div class="row pt-1 pb-1 mt-2">
          <ng-container 
            *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'pref_first_given_name'}">
          </ng-container>
          <ng-container 
            *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'pref_first_given_name'}">
          </ng-container>
        </div>
        <div class="row pt-1 pb-1 mt-2">
          <ng-container 
            *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'pref_second_given_name'}">
          </ng-container>
          <ng-container 
            *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'pref_second_given_name'}">
          </ng-container>
        </div>
        <div class="row pt-1 pb-1 mt-2">
          <ng-container 
            *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'pref_family_name'}">
          </ng-container>
          <ng-container 
            *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'pref_family_name'}">
          </ng-container>
        </div>
        <div class="row pt-1 pb-1 mt-2">
          <ng-container 
            *ngTemplateOutlet="fieldLabel; context: {cls: 'au', field: 'pref_suffix'}">
          </ng-container>
          <ng-container 
            *ngTemplateOutlet="fieldInput; context: {cls: 'au', field: 'pref_suffix'}">
          </ng-container>
        </div>
      </ng-template>
    </li>
  </ul>
  <div [ngbNavOutlet]="nameNav"></div>
  <hr class="m-2"/>


</div>

